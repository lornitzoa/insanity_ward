<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="CalendarsApp">
  <head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular.min.js" charset="utf-8"></script>
    <script src="/js/app.js" charset="utf-8"></script>
    <link rel="stylesheet" href="/css/main.css">
    <title></title>
  </head>
  <body ng-controller='CalendarController as ctrl'>
    <div class="title">
      <h1>My Calendar</h1>
    </div>
    <div class="add-event-container">
      <!-- Modal Creation -->
      <a href="#openModal"><h2>Add Event</h2></a>
      <div id="openModal" class="modalDialog">
          <!-- "Add Event" Form -->
      		<form ng-submit='ctrl.createEvent()'>
            	<!-- Modal Closing -->
              <div class="close">
          		   <a href="#close" title="Close">X</a>
              </div><br>
            <label>Name</label>
              <input type="text" placeholder="Name" ng-model='ctrl.name'>
            <label>Date</label>
              <input type="date" placeholder="Date" ng-model='ctrl.date'>
            <label>Start Time</label>
              <input type="time" placeholder="Start Time" ng-model='ctrl.startTime'>
            <label>End Time</label>
              <input type="time" placeholder="End Time" ng-model='ctrl.endTime'>
            <label>Location</label>
              <input type="text" placeholder="Location" ng-model='ctrl.location'>
            <label>Notes</label>
            <input type="text" placeholder="Notes" ng-model='ctrl.notes'>

            <a href="#close"><input action="#close" name="buttons" type="submit" value="Add"></a>
            <input name="buttons" type="reset" value="Reset">
          </form>
      </div>

    </div>
    <div class="calendar-container">
      <div class="event-container" ng-repeat='event in ctrl.calendar | orderBy: "-date" : true'>
                                    <!-- hides the 'show' div on edit button click -->
        <div class="event" ng-show='$index !== ctrl.eventIndex'>

          <h3>{{event.name}}</h3>
          <h4>Date: {{event.date | date: 'MM/dd/yyyy'}}</h4>
          <h4>Time: {{event.startTime | date: 'HH:mma'}} to {{event.endTime | date: 'HH:mma'}}</h4>
          <h4>{{event.location}}</h4>
          <p>Notes: {{event.notes}}</p>
          <button type="button" ng-click='ctrl.eventIndex = $index; console.log($index)'>Edit</button>
          <button type="button" ng-click='ctrl.deleteEvent(event._id)'>Delete</button>
        </div>
                                            <!-- shows the edit form on edit button click -->
        <form ng-submit='ctrl.editEvent(event)' ng-show='$index === ctrl.eventIndex'>
          <h2>Edit Event</h2>
          <input type="text" placeholder="{{event.name}}" ng-model='ctrl.editName'>
          <input type="text" placeholder="{{event.date | date: 'MM/dd/yyyy'}}" ng-model='ctrl.editDate'>
          <input type="text" placeholder="{{event.startTime | date: 'HH:mma'}}" ng-model='ctrl.editStartTime'>
          <input type="text" placeholder="{{event.endTime | date: 'HH:mma'}}" ng-model='ctrl.editEndTime'>
          <input type="text" placeholder="{{event.location}}" ng-model='ctrl.editLocation'>
          <input type="text" placeholder="{{event.notes}}" ng-model='ctrl.editNotes'>
          <input type="submit" name="" value="Submit">
          <button type="button" name="button" ng-click='ctrl.eventIndex = null'>Cancel</button>

        </form>
      </div>
    </div>
  </body>
</html>
